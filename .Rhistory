min(efc$pos_v_4,na.rm=TRUE)
vtable(efc,out="return",values=TRUE)
library(vtable)
names(efc)
labe <- data.frame(foo=c("tot_sc_e","n4pstu","nur_pst"),nm=c("Hey","Ho","Hi"))
vtable(efc,labels=labe,out="return",class=FALSE)
library(vtable)
vtable(efc,labels=labe,out="return",class=FALSE)
min(is.na(labe))
dim(labe)[1] > 1 & dim(labe)[2] == 2
a
a$c <- NA
a
a$c <- NULL
a
library(vtable)
vtable(efc,labels=labe,out="return",class=FALSE)
a
l2 <- efc[1:10,]
l2
l2$order <- 1:nrow(l2)
l2
l2 <- l2[order(l2$tot_sc_e)]
l2
l2 <- efc[1:10,]
l2$order <- 1:nrow(l2)
l2 <- l2[order(l2$tot_sc_e),]
l2
library(vtable)
vtable(efc,labels=labe,out="return",class=FALSE)
a <- vtable(efc,labels=labe,out="return",class=FALSE)
rownames(a) <- 1:nrow(a)
a
vtable(efc,labels=labe,out="return",class=FALSE)
library(vtable)
substitute(data)
help(substitute)
z <- c("Foo","Boo","Goo")
is.numeric(z)
is.character(z)
col.width = c(40,80/2,20)
col.width
col.width = c(100/3,100/3,100/3)
col.width
round(col.width,0)
round(col.width,1)
as.character(round(col.width,1))
as.character(col.width)
vtable(efc,labels=c("Hey!"),out="return",class=FALSE)
vtable(efc,labels=labe,out="moop",class=FALSE)
vtable(efc,labels=labe,out="return",class=2)
vtable(efc,labels=labe,out="return",values=2)
vtable(efc,labels=labe,out="return",factor.limit=3.2)
vtable(efc,labels=labe,out="return",file=2)
library(vtable)
vtable(efc,labels=labe,out="return",data.name=2)
vtable(efc,labels=labe,out="return",desc=2)
library(vtable)
vtable(efc,labels=labe,out="return",data.name=2)
vtable(efc,labels=labe,out="return",data.title=2)
vtable(efc,labels=labe,out="return",desc=2)
vtable(efc,labels=labe,out="return",col.width="2")
vtable(efc,labels=labe,out="return",col.width=c(100,NA))
library(vtable)
vtable(efc,labels=labe,out="return",col.width=c(100,NA))
vtable(efc,labels=labe,out="return",col.width=c(100,100))
vtable(efc,labels=labe,out="return",select=c("c12hour"))
vtable(efc,labels=labe,out="return",select="c12hour")
vtable(efc,labels=labe,out="return",select=2)
vtable(efc,labels=labe,out="return",select=TRUE)
vtable(efc,labels=labe,out="return",select=as.data.frame(a="foo"))
vtable(efc,labels=labe,out="return",select=data.frame(a="foo"))
vtable(efc,labels=labe,out="return",select=c("neg_c_7",NA))
set_label(a,c("Hoo","BOO"))
a<-set_label(a,c("Hoo","BOO"))
a
View(a)
df <- data.frame(var1 = 1:4,var2=5:8,var3=c("A","B","C","D"),var4=as.factor(c("A","B","C","C")),var5=c(T,T,F,F))
df <- set_label(df,c("Number 1","Number 2","Some Letters","Some Labels","You Good?"))
df$var1 <- set_labels(df$var1,c("A little","Some more","Even more","A lot"))
help(set_labels)
df$var1 <- set_labels(df$var1,labels=c("A little","Some more","Even more","A lot"))
vtable(df,out="return")
vtable(df,out="return",values=TRUE)
vtable(df,out="return",values=TRUE)
library(vtable)
class(efc)
lapply(efc,is.factor)
unlist(lapply(efc,is.factor))
sapply(efc,is.factor)
library(vtable)
vtable(df,out="return",values=TRUE)
"
""
)
library(vtable)
vtable(df,out="return",values=TRUE)
b <- names(vtable(df,out="return",values=TRUE))
b <- vtable(df,out="return",values=TRUE)
b
names(v)
names(b)
namesvtable(df,out="return",values=TRUE))
names(vtable(df,out="return",values=TRUE))
b <- vtable(df,out="return",values=TRUE)
b
c <- names(b)
c
"Label" %in% c
#Pull out labels
vallabs <- get_labels(data,values=TRUE)
#Add numerical coding
vallabscode <- lapply(vallabs, function(x) paste(names(x),': ',x,sep=''))
#Make sure the labels are named chr vectors
names(vallabscode) <- lapply(vallabs,function(x) names(x))
#Identify which variables had labels
havelabels <- sapply(vallabs,function(x) !is.null(x))
havelabels
#Don't count the factors, we don't want to relabel them
havelabels[sapply(data,is.factor)] <- FALSE
havelabels
data <-efc
#Pull out labels
vallabs <- get_labels(data,values=TRUE)
#Add numerical coding
vallabscode <- lapply(vallabs, function(x) paste(names(x),': ',x,sep=''))
#Make sure the labels are named chr vectors
names(vallabscode) <- lapply(vallabs,function(x) names(x))
#Identify which variables had labels
havelabels <- sapply(vallabs,function(x) !is.null(x))
#Don't count the factors, we don't want to relabel them
havelabels[sapply(data,is.factor)] <- FALSE
havelabels
#Set new coded labels among the variables with value labels
data[,havelabels] <- set_labels(data[,havelabels],labels=vallabscode[havelabels])
#And turn 'em into factors
data[,havelabels] <- as_label(data[,havelabels])
#Fill in description of factor levels for factor
factorlevels <- lapply(subset(data,select=sapply(data,is.factor)),levels)
#Find out which variables have too many factors
toomany <- sapply(factorlevels,function(x) length(x) > factor.limit)
factor.limit=5
#Find out which variables have too many factors
toomany <- sapply(factorlevels,function(x) length(x) > factor.limit)
#Cut back to the limit
factorlevels <- lapply(factorlevels,function(x) x[1:min(factor.limit,length(x))])
factorlevels
#Make sure each factor surrounded by '
factorlevels <- paste('\'',
lapply(factorlevels,paste,collapse='\' \''),
'\'',sep='')
#If some were cut, indicate that
factorlevels <- ifelse(toomany,paste(factorlevels,'and more'),factorlevels)
vt <- data.frame(Name=names(data))
#And fill in for output table
vt[sapply(data,is.factor),]$Values <- factorlevels
factorlevels
length(factorlevels)
length(vt)
dim(vt)
length(vt[sapply(data,is.factor)])
length(vt[sapply(data,is.factor),])
#And fill in for output table
vt[sapply(data,is.factor),]$Values <- factorlevels
vt$Values = ''
#And fill in for output table
vt[sapply(data,is.factor),]$Values <- factorlevels
vt
#Get minimums
min <- lapply(subset(data,select=sapply(data,is.numeric)),min,na.rm=TRUE)
#Get maximums
max <- lapply(subset(data,select=sapply(data,is.numeric)),max,na.rm=TRUE)
#Range description
range <- paste('Num:',min,'to',max)
#Fill in for output table
vt[sapply(data,is.numeric),]$Values <- range
vt
library(vtable)
vtable(df,out="return",values=TRUE)
library(vtable)
vtable(df,out="return",values=TRUE)
b <- vtable(df,out="return",values=TRUE)
b
dim(data)
dim(data)[2]
rep(100/dim(data)[2],dim(data)[2])
library(vtable)
vt
dftoHTML(vt)
library(vtable)
dftoHTML(vt)
??rstudio::viewer
??rstudioapi::viewer
library(rstudioapi)
dftoHTML(vt)
library(vtable)
dftoHTML(vt)
library(vtable)
a <- data.frame(a=1:10,b=11:20,c=21:30)
dftoHTML(a)
vtable(a)
library(vtable)
vtable(a)
library(vtable)
vtable(a)
vtable(a,out="return")
library(vtable)
vtable(a,out="return")
vtable(a)
labs <- sapply(data, function(x) attr(x,'label'))
labs
is.null(labs)
unlist(labs)
library(vtable)
vtable(a)
vtable(a,desc="HELLO THERE")
vtable(a,desc="HELLO THERE",col.width=c(80,20))
vtable(a,desc="HELLO THERE",col.width=c(1,99))
vtable(a,desc="HELLO THERE",col.width=c(1,99),data.title="My Data")
library(sjlabelled)
data(efc)
vtable(efc)
vt
vt <- vtable(a,out="return",desc="HELLO THERE",col.width=c(1,99),data.title="My Data")
vt
vt <- vtable(efc,out="return",desc="HELLO THERE",data.title="My Data")
vt
names(vt)
names(vt)=="Label"
library(vtable)
vtable(efc)
library(vtable)
vtable(efc)
library(vtable)
vtable(efc)
round(2.2222,2)
library(vtable)
vtable(efc)
vtable(efc)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
vt
colnames(vt)
'Label' %in% colnames(vt)
names(vt)
'Label' %in% names(vt)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
vtable(efc,values=TRUE,col.width=c(40,10,10,40))
vtable(efc,values=TRUE
)
library(vtable)
vtable(efc,values=TRUE)
vtable(efc,labels=NA,values=TRUE)
vtable(efc,labels=NA,values=TRUE,class=FALSE)
library(vtable)
vtable(efc,labels=NA,values=TRUE,class=FALSE)
library(vtable)
vtable(efc,labels=NA,values=TRUE,class=FALSE)
library(vtable)
vtable(efc,labels=NA,values=TRUE,class=FALSE)
vtable(efc,values=TRUE,class=FALSE)
labels <- c("FOO","BOO")
min(!is.na(labels))==0
min(!is.na(labels))==1
sum(!is.na(labels)) > 0
min(labels == "omit")==1
library(vtable)
labels <- c("FOO","BOO")
vtable(efc,values=TRUE,class=FALSE)
vtable(efc,values=FALSE,class=FALSE)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
help(dftoHTML)
help(vtable)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
aa <- c(1,2,3)
foo ="f"
paste(foo,aa)
aa <- data.frame(a=1:3)
paste(foo,aa)
paste(foo,aa[,1])
dim(aa)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
vtable(efc,labels="omit",values=FALSE,class=FALSE)
library(vtable)
document()
library(roxygen2)
document()
roxygenize()
help(vtable)
help(dftoHTML)
library(vtable)
roxygenize
roxygenize()
library(haven)
library(vtable)
roxygenize()
roxygenize()
help(vtable)
df <- data.frame(var1 = 1:4,var2=5:8,var3=c('A','B','C','D'),var4=as.factor(c('A','B','C','C')),var5=c(T,T,F,F))
vtable(df,labels=c('Number 1','Number 2','Some Letters','Some Labels','You Good?'))
vtable(df,labels=c('Number 1','Number 2','You Good?'),class=FALSE,select=c(1,2,5))
vtable(df,labels=c('Number 1','Some Labels'),values=TRUE,factor.limit=1,select=c('var1','var4'))
library(sjlabelled)
df <- set_label(df,c('Number 1','Number 2','Some Letters','Some Labels','You Good?'))
df$var1 <- set_labels(df$var1,labels=c('A little','Some more','Even more','A lot'))
vtable(df)
data(efc)
vtable(efc)
vtable(df)
vtable(efc)
library(vtable)
vtable(efc)
vtable(efc,values=TRUE)
vtable(efc)
library(vtable)
library(vtable,values=TRUE)
vtable(efc)
vtable(efc,values=TRUE)
vtable(efc)
library(vtable)
library(vtable,values=TRUE)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
library(vtable)
vtable(efc,values=TRUE)
labelsmethod2 <- data.frame(var1='Number 1',var2='Number 2',var3='Some Letters',var4='Some Labels',var5='You Good?')
labelsmethod3 <- data.frame(a =c("var1","var2","var3","var4","var5"),b=c('Number 1','Number 2','Some Letters','Some Labels','You Good?'))
vtable(df,labels=labelsmethod2)
vtable(df,labels=labelsmethod3)
vtable(df,labels=c('Number 1','Some Labels'),values=TRUE,factor.limit=1,select=c('var1','var4'))
vtable(df,labels=c('Number 1','Some Labels'),values=TRUE,factor.limit=1,select=c('var1','var4'),col.width=c(25,10,40,35))
vtable(df,labels=c('Number 1','Some Labels'),values=TRUE,factor.limit=1,select=c('var1','var4'),col.width=c(10,10,40,35))
vtable(df,labels=labelsmethod3)
vtable(efc)
devtools::use-vignette('vtable')
devtools::use_vignette('vtable')
usethis::use_vignette('vtable')
help(usethis::use_vignette)
??usethis::use_vignette
vtable(efc,file="foo.html")
file = "foo.html"
"." %in% file
help(grep)
grep(".",file)
grep("q",file)
grep("q",file)==0
grep("q",file)==integer(0)
grep("q",file)
!grep("q",file)
regexpr(".",file)
regexpr(".",file)$match.length
regexec(".",file)
regexec(".",file)[[1]]
regexec(".",file)[[1]][1]
regexec("q",file)[[1]][1]
library(vtable)
vtable(efc,file="foo")
(regexec(".","foo")
)
file="foo"
(regexec(".","foo"))
grepl(".","foo")
grepl("\.","foo")
grepl("\.","foo")
grepl(".","foo")
regexpr(".","foo")
grepl(".","foo")
grepl("foo",".")
grepl("foo","o")
grepl("\.","foo")
grepl("\\.","foo")
grepl("\\.","foo.")
!grepl("\\.",file)
file
library(vtable)
vtable(efc,file="foo")
vtable(efc,out="return")
vignette(AER)
library(AER)
vignette(AER)
vignette('AER')
vignette('AER')
roxygenize()
vignette('vtable')
library(dplyr)
vignette(dplyr)
vignette('dplyr')
vignette('vtable')
library(vtable)
#Note that LifeCycleSavings has five variables
#with names "sr", "pop15", "pop75", "dpi", and "ddpi"
data(LifeCycleSavings)
#These variable labels are taken from help(LifeCycleSavings)
labs <- data.frame(sr = "numeric aggregate personal savings",
pop15 = "numeric % of population under 15",
pop75 = "numeric % of population over 75")
vtable(LifeCycleSavings,labels=labs)
labs <- as.matrix(labs)
vtable(LifeCycleSavings,labels=labs)
data(LifeCycleSavings)
vtable(LifeCycleSavings)
labels=NA
min(labels=="omit",na.rm=treering)
min(labels=="omit",na.rm=true)
min(labels=="omit",na.rm=TRUE)
min(labels=="omit",na.omit=TRUE)
min(labels=="omit",na.omit=TRUE)==0
min(is.na(labels))==0 & min(labels=="omit",na.omit=TRUE)==0
min(is.na(labels))==0
labels = "omit"
min(is.na(labels))==0
length(labels) == 1 & labels[1] == "omit"
length(labels) == 1 & labels[1] == "omit" == FALSE
(length(labels) == 1 & labels[1] == "omit") == FALSE
labels
(length(labels) == 1 & labels[1] == "omit") == TRUE
labels = NA
(length(labels) == 1 & labels[1] == "omit") == TRUE
(min(is.na(labels) == 0) & length(labels) == 1 & labels[1] == "omit") == TRUE
min(is.na(labels))==0 & (length(labels) == 1 & labels[1] == "omit") == TRUE
labels
labels <- "omit"
min(is.na(labels))==0 & (length(labels) == 1 & labels[1] == "omit") == TRUE
library(vtable)
vtable(LifeCycleSavings)
vtable(LifeCycleSavings,class=FALSE)
vtable(LifeCycleSavings,values=TRUE)
data("CO2")
vtable(CO2,values=TRUE)
CO2
class(CO2$Plant)
vtable(efc,values=TRUE)
library(sjlabelled)
data(efc)
vtable(efc,values=TRUE)
vtable(CO2,values=TRUE,factor.limit=1)
vtable(CO2,values=TRUE)
vtable(CO2,values=TRUE,factor.limit=0)
help(LifeCycleSavings
)
vtable(LifeCycleSavings,data.title="Intercountry Life-Cycle Savings Data")
vtable(LifeCycleSavings,data.title="Intercountry Life-Cycle Savings Data",
desc='Data on the savings ratio 1960–1970.')
help(efc)
vtable(efc)
vtable(efc,values=TRUE)
vtable(efc,values=TRUE,col.width=c(10,10,40,40))
vtable(efc,values=TRUE,select=c("c12hour","e42dep","c83cop2"))
vtable(efc)
library(vtable)
vartable <- vtable(LifeCycleSavings,out="return")
df <- data.frame(var1 = 1:4,var2=5:8,var3=c('A','B','C','D'),var4=as.factor(c('A','B','C','C')),var5=c(T,T,F,F))
vtable(subset(df,select=c('var1','var4')),labels=c('Number 1','Some Labels'),values=TRUE,factor.limit=1,col.width=c(10,10,40,35))
library(vtable)
vtable(subset(df,select=c('var1','var4')),labels=c('Number 1','Some Labels'),values=TRUE,factor.limit=1,col.width=c(10,10,40,35))
vartable <- vtable(LifeCycleSavings,out="return")
vartable
vtable(LifeCycleSavings,out="htmlreturn")
LifeCycleSavings
dftoHTML(LifeCycleSavings)
dftoHTML(LifeCycleSavings,out="browser")
dftoHTML(LifeCycleSavings,out="browser")
library(vtable)
dftoHTML(LifeCycleSavings,out="browser",row.names=TRUE)
library(vtable)
library(vtable)
dftoHTML(LifeCycleSavings,out="browser",row.names=TRUE)
dftoHTML(LifeCycleSavings,out="viewer")
dftoHTML(LifeCycleSavings,out="viewer",row.names=TRUE)
dftoHTML(LifeCycleSavings)
dftoHTML(LifeCycleSavings,col.width=c(20,20,20,20,20))
dftoHTML(LifeCycleSavings,col.width=c(60,10,10,10,10))
dftoHTML(LifeCycleSavings,row.names=TRUE)
rmarkdown::pdf_document()
rmarkdown::pdf_document('vtable.Rmd')
